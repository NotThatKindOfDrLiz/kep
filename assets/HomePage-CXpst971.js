import{R as N,j as e,r as o}from"./index-BEffNcEt.js";import{c as R,a as A,P as te,b as ke,d as se,u as Se,e as Ee,R as Pe,f as re,A as Oe,g as T,h as Ae,D as Me,C as De,i as Le,j as Re,k as Ie,l as _e,m as ze,L as C,B as y,S as V,n as He,o as G,p as W,q as $,r as Fe,s as Be,t as F,v as Ue,w as ne,x as ae,y as ie,z as oe,E as le,F as ce,I as de,G as ue,H as Ve,J as Ge,K as We,M as $e,N as qe,O as Ye,Q as Ke}from"./Header-xmHO3h7T.js";var me={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X=N.createContext&&N.createContext(me),Je=["attr","size","title"];function Xe(t,r){if(t==null)return{};var s=Qe(t,r),n,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)n=c[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Qe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function D(){return D=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},D.apply(this,arguments)}function Q(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function L(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Q(Object(s),!0).forEach(function(n){Ze(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Ze(t,r,s){return r=et(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function et(t){var r=tt(t,"string");return typeof r=="symbol"?r:r+""}function tt(t,r){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function xe(t){return t&&t.map((r,s)=>N.createElement(r.tag,L({key:s},r.attr),xe(r.child)))}function M(t){return r=>N.createElement(st,D({attr:L({},t.attr)},r),xe(t.child))}function st(t){var r=s=>{var{attr:n,size:a,title:c}=t,l=Xe(t,Je),u=a||s.size||"1em",i;return s.className&&(i=s.className),t.className&&(i=(i?i+" ":"")+t.className),N.createElement("svg",D({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,l,{className:i,style:L(L({color:t.color||s.color},s.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&N.createElement("title",null,c),t.children)};return X!==void 0?N.createElement(X.Consumer,null,s=>r(s)):r(me)}function rt(t){return M({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function nt(t){return M({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function at(t){return M({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function b({className:t,...r}){return e.jsx("div",{className:R("animate-pulse rounded-md bg-muted",t),...r})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=A("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=A("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=A("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=A("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),I=o.forwardRef(({className:t,...r},s)=>e.jsx("textarea",{className:R("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));I.displayName="Textarea";function ut(t){return M({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},child:[]}]})(t)}function mt(t){return M({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.56.56 0 0 0-.163-.505L1.71 6.745l4.052-.576a.53.53 0 0 0 .393-.288L8 2.223l1.847 3.658a.53.53 0 0 0 .393.288l4.052.575-2.906 2.77a.56.56 0 0 0-.163.506l.694 3.957-3.686-1.894a.5.5 0 0 0-.461 0z"},child:[]}]})(t)}var xt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ht="VisuallyHidden",he=o.forwardRef((t,r)=>e.jsx(te.span,{...t,ref:r,style:{...xt,...t.style}}));he.displayName=ht;var pt=he,[_,$t]=ke("Tooltip",[se]),z=se(),pe="TooltipProvider",ft=700,B="tooltip.open",[gt,q]=_(pe),fe=t=>{const{__scopeTooltip:r,delayDuration:s=ft,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:c}=t,l=o.useRef(!0),u=o.useRef(!1),i=o.useRef(0);return o.useEffect(()=>{const x=i.current;return()=>window.clearTimeout(x)},[]),e.jsx(gt,{scope:r,isOpenDelayedRef:l,delayDuration:s,onOpen:o.useCallback(()=>{window.clearTimeout(i.current),l.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:o.useCallback(x=>{u.current=x},[]),disableHoverableContent:a,children:c})};fe.displayName=pe;var O="Tooltip",[vt,H]=_(O),ge=t=>{const{__scopeTooltip:r,children:s,open:n,defaultOpen:a,onOpenChange:c,disableHoverableContent:l,delayDuration:u}=t,i=q(O,t.__scopeTooltip),x=z(r),[d,p]=o.useState(null),m=Se(),h=o.useRef(0),g=l??i.disableHoverableContent,v=u??i.delayDuration,f=o.useRef(!1),[w,j]=Ee({prop:n,defaultProp:a??!1,onChange:J=>{J?(i.onOpen(),document.dispatchEvent(new CustomEvent(B))):i.onClose(),c==null||c(J)},caller:O}),S=o.useMemo(()=>w?f.current?"delayed-open":"instant-open":"closed",[w]),E=o.useCallback(()=>{window.clearTimeout(h.current),h.current=0,f.current=!1,j(!0)},[j]),P=o.useCallback(()=>{window.clearTimeout(h.current),h.current=0,j(!1)},[j]),K=o.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{f.current=!0,j(!0),h.current=0},v)},[v,j]);return o.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),e.jsx(Pe,{...x,children:e.jsx(vt,{scope:r,contentId:m,open:w,stateAttribute:S,trigger:d,onTriggerChange:p,onTriggerEnter:o.useCallback(()=>{i.isOpenDelayedRef.current?K():E()},[i.isOpenDelayedRef,K,E]),onTriggerLeave:o.useCallback(()=>{g?P():(window.clearTimeout(h.current),h.current=0)},[P,g]),onOpen:E,onClose:P,disableHoverableContent:g,children:s})})};ge.displayName=O;var U="TooltipTrigger",ve=o.forwardRef((t,r)=>{const{__scopeTooltip:s,...n}=t,a=H(U,s),c=q(U,s),l=z(s),u=o.useRef(null),i=re(r,u,a.onTriggerChange),x=o.useRef(!1),d=o.useRef(!1),p=o.useCallback(()=>x.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(Oe,{asChild:!0,...l,children:e.jsx(te.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:i,onPointerMove:T(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!c.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:T(t.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:T(t.onPointerDown,()=>{a.open&&a.onClose(),x.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:T(t.onFocus,()=>{x.current||a.onOpen()}),onBlur:T(t.onBlur,a.onClose),onClick:T(t.onClick,a.onClose)})})});ve.displayName=U;var yt="TooltipPortal",[qt,jt]=_(yt,{forceMount:void 0}),k="TooltipContent",ye=o.forwardRef((t,r)=>{const s=jt(k,t.__scopeTooltip),{forceMount:n=s.forceMount,side:a="top",...c}=t,l=H(k,t.__scopeTooltip);return e.jsx(Ae,{present:n||l.open,children:l.disableHoverableContent?e.jsx(je,{side:a,...c,ref:r}):e.jsx(bt,{side:a,...c,ref:r})})}),bt=o.forwardRef((t,r)=>{const s=H(k,t.__scopeTooltip),n=q(k,t.__scopeTooltip),a=o.useRef(null),c=re(r,a),[l,u]=o.useState(null),{trigger:i,onClose:x}=s,d=a.current,{onPointerInTransitChange:p}=n,m=o.useCallback(()=>{u(null),p(!1)},[p]),h=o.useCallback((g,v)=>{const f=g.currentTarget,w={x:g.clientX,y:g.clientY},j=kt(w,f.getBoundingClientRect()),S=St(w,j),E=Et(v.getBoundingClientRect()),P=Ot([...S,...E]);u(P),p(!0)},[p]);return o.useEffect(()=>()=>m(),[m]),o.useEffect(()=>{if(i&&d){const g=f=>h(f,d),v=f=>h(f,i);return i.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{i.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[i,d,h,m]),o.useEffect(()=>{if(l){const g=v=>{const f=v.target,w={x:v.clientX,y:v.clientY},j=(i==null?void 0:i.contains(f))||(d==null?void 0:d.contains(f)),S=!Pt(w,l);j?m():S&&(m(),x())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[i,d,l,x,m]),e.jsx(je,{...t,ref:c})}),[wt,Nt]=_(O,{isInside:!1}),Ct=Le("TooltipContent"),je=o.forwardRef((t,r)=>{const{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:c,onPointerDownOutside:l,...u}=t,i=H(k,s),x=z(s),{onClose:d}=i;return o.useEffect(()=>(document.addEventListener(B,d),()=>document.removeEventListener(B,d)),[d]),o.useEffect(()=>{if(i.trigger){const p=m=>{const h=m.target;h!=null&&h.contains(i.trigger)&&d()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[i.trigger,d]),e.jsx(Me,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:d,children:e.jsxs(De,{"data-state":i.stateAttribute,...x,...u,ref:r,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Ct,{children:n}),e.jsx(wt,{scope:s,isInside:!0,children:e.jsx(pt,{id:i.contentId,role:"tooltip",children:a||n})})]})})});ye.displayName=k;var be="TooltipArrow",Tt=o.forwardRef((t,r)=>{const{__scopeTooltip:s,...n}=t,a=z(s);return Nt(be,s).isInside?null:e.jsx(Re,{...a,...n,ref:r})});Tt.displayName=be;function kt(t,r){const s=Math.abs(r.top-t.y),n=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),c=Math.abs(r.left-t.x);switch(Math.min(s,n,a,c)){case c:return"left";case a:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function St(t,r,s=5){const n=[];switch(r){case"top":n.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":n.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":n.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":n.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return n}function Et(t){const{top:r,right:s,bottom:n,left:a}=t;return[{x:a,y:r},{x:s,y:r},{x:s,y:n},{x:a,y:n}]}function Pt(t,r){const{x:s,y:n}=t;let a=!1;for(let c=0,l=r.length-1;c<r.length;l=c++){const u=r[c],i=r[l],x=u.x,d=u.y,p=i.x,m=i.y;d>n!=m>n&&s<(p-x)*(n-d)/(m-d)+x&&(a=!a)}return a}function Ot(t){const r=t.slice();return r.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),At(r)}function At(t){if(t.length<=1)return t.slice();const r=[];for(let n=0;n<t.length;n++){const a=t[n];for(;r.length>=2;){const c=r[r.length-1],l=r[r.length-2];if((c.x-l.x)*(a.y-l.y)>=(c.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const s=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;s.length>=2;){const c=s[s.length-1],l=s[s.length-2];if((c.x-l.x)*(a.y-l.y)>=(c.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var Mt=fe,Dt=ge,Lt=ve,we=ye;const Ne=Mt,Ce=Dt,Te=Lt,Y=o.forwardRef(({className:t,sideOffset:r=4,...s},n)=>e.jsx(we,{ref:n,sideOffset:r,className:R("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Y.displayName=we.displayName;const Rt=Ie("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Z({className:t,variant:r,...s}){return e.jsx("div",{className:R(Rt({variant:r}),t),...s})}const It=({item:t,threadId:r,isAdmin:s})=>{var u;const{mutate:n}=He(),a=new Date(t.createdAt*1e3).toLocaleDateString(),c=()=>{s&&n({threadId:r,itemId:t.id,updates:{starred:!t.starred}})},l=i=>{s&&n({threadId:r,itemId:t.id,updates:{priority:i}})};return e.jsxs(G,{className:`w-full transition-all ${t.starred?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":""}`,children:[e.jsxs(W,{className:"flex flex-row items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center",children:[s&&e.jsx(Ne,{children:e.jsxs(Ce,{children:[e.jsx(Te,{asChild:!0,children:e.jsx("button",{onClick:c,"aria-label":t.starred?"Unstar item":"Star item",className:"mr-2 text-amber-500 hover:text-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2",children:t.starred?e.jsx(ut,{size:18}):e.jsx(mt,{size:18})})}),e.jsx(Y,{children:t.starred?"Unstar this item":"Star this item"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.isAnonymous?"Anonymous":((u=t.submittedBy)==null?void 0:u.name)||"Unknown user"}),e.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:a}),t.isAnonymous&&e.jsx(Z,{variant:"outline",className:"text-xs",children:"Anonymous"})]})]}),s&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>l(t.priority?t.priority-1:1),"aria-label":"Increase priority",children:"↑"}),e.jsx(Z,{variant:"secondary",className:"mx-1",children:t.priority||"-"}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>l(t.priority?t.priority+1:9999),"aria-label":"Decrease priority",children:"↓"})]})]}),e.jsx($,{children:e.jsx("p",{className:"whitespace-pre-wrap",children:t.content})})]})},_t=({threadId:t})=>{const[r,s]=o.useState(""),[n,a]=o.useState(!1),{mutate:c,isPending:l}=_e(),{transcript:u,isListening:i,startListening:x,stopListening:d,resetTranscript:p,error:m}=ze(),h=o.useRef(null);o.useEffect(()=>{u&&s(f=>f+(f?" ":"")+u)},[u]);const g=f=>{f.preventDefault(),r.trim()&&c({threadId:t,content:r.trim(),isAnonymous:n},{onSuccess:()=>{s(""),p(),h.current&&h.current.focus()}})},v=()=>{i?d():(x(),p())};return e.jsxs("form",{onSubmit:g,className:"space-y-4 w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"agenda-item",className:"text-base font-medium",children:"Add an agenda item"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{id:"agenda-item",ref:h,value:r,onChange:f=>s(f.target.value),placeholder:"What would you like to discuss? Add your agenda item here...",className:"min-h-[120px] resize-y pr-12","aria-label":"Agenda item content",disabled:l}),e.jsx(Ne,{children:e.jsxs(Ce,{children:[e.jsx(Te,{asChild:!0,children:e.jsx(y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-2",onClick:v,"aria-label":i?"Stop voice input":"Start voice input (accessibility feature)",disabled:!!m,children:i?e.jsx(ot,{className:"h-5 w-5 text-red-500"}):e.jsx(lt,{className:"h-5 w-5"})})}),e.jsx(Y,{children:i?"Stop voice input":"Use voice to text"})]})})]}),i&&e.jsxs("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 animate-pulse flex items-center gap-2",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),"Listening... speak now"]}),m&&e.jsx("div",{className:"text-sm text-red-500",children:m})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"anonymous",checked:n,onCheckedChange:a,"aria-label":"Submit anonymously"}),e.jsx(C,{htmlFor:"anonymous",className:"text-sm cursor-pointer",children:"Submit anonymously"})]}),e.jsxs(y,{type:"submit",disabled:!r.trim()||l,"aria-busy":l,className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4"}),l?"Submitting...":"Submit"]})]})]})},ee=({items:t,threadId:r,isAdmin:s})=>t.length===0?e.jsxs("div",{className:"text-center py-12 px-4 border-2 border-dashed rounded-lg text-muted-foreground",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No agenda items yet"}),e.jsx("p",{children:"Be the first to add a topic for discussion!"})]}):e.jsx("div",{className:"space-y-4",children:t.map(n=>e.jsx(It,{item:n,threadId:r,isAdmin:s},n.id))});function zt(t){const r={};return t.forEach(s=>{const n=s.content.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");let a="";n.includes("feature")||n.includes("product")||n.includes("roadmap")?a="Product & Features":n.includes("bug")||n.includes("fix")||n.includes("issue")?a="Bugs & Issues":n.includes("team")||n.includes("hire")||n.includes("staff")?a="Team & Hiring":n.includes("customer")||n.includes("user")||n.includes("client")?a="Customer Feedback":n.includes("timeline")||n.includes("deadline")||n.includes("schedule")?a="Timelines & Scheduling":n.includes("budget")||n.includes("cost")||n.includes("expense")?a="Budget & Finances":n.includes("announce")||n.includes("marketing")||n.includes("launch")?a="Marketing & Announcements":a="Other Topics",r[a]||(r[a]=[]),r[a].push(s)}),Object.entries(r).map(([s,n])=>({title:s,items:n}))}const Ht=()=>{const{data:t,isLoading:r,error:s}=Fe(),{isAdmin:n,isLoading:a}=Be(),[c,l]=o.useState(!1);return r||a?e.jsx(Vt,{}):s||!t?e.jsx(Bt,{}):e.jsx("div",{className:"container max-w-4xl mx-auto py-6",children:e.jsx(Ft,{thread:t,isAdmin:n,useAIGrouping:c,onToggleAI:()=>l(!c)})})},Ft=({thread:t,isAdmin:r,useAIGrouping:s,onToggleAI:n})=>{const{data:a=[],isLoading:c}=Ve(t.id),[l,u]=o.useState(t.showSubmissions),i=Ge(),[x,d]=o.useState([]);N.useEffect(()=>{s&&a.length>0?d(zt(a)):d([])},[a,s]);const p=m=>{const h=i(a,m),g=new Blob([h],{type:m==="json"?"application/json":"text/markdown"}),v=URL.createObjectURL(g),f=document.createElement("a");f.href=v,f.download=`agenda-${t.id}.${m==="json"?"json":"md"}`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(v)};return e.jsxs(G,{className:"w-full",children:[e.jsxs(W,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(We,{children:t.title}),e.jsx($e,{children:e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(rt,{className:"mr-1"}),e.jsxs("span",{children:[F(t.startDate,"MMMM d")," - ",F(t.endDate,"MMMM d, yyyy")]})]})})]}),r&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ut,{thread:t}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>p("markdown"),"aria-label":"Export as Markdown",children:"Export MD"}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>p("json"),"aria-label":"Export as JSON",children:"Export JSON"})]})]}),t.description&&e.jsx("div",{className:"mt-4 text-sm",children:t.description})]}),e.jsxs($,{className:"space-y-6",children:[e.jsx(_t,{threadId:t.id}),r&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{id:"ai-grouping",checked:s,onCheckedChange:n,"aria-label":"Use AI to group similar items"}),e.jsx(C,{htmlFor:"ai-grouping",children:"Group similar items with AI"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>u(!l),className:"flex items-center gap-1","aria-label":l?"Hide agenda items":"Show agenda items",children:l?e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"mr-1"})," Hide items"]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"mr-1"})," Show items"]})})})]}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"w-full h-24"}),e.jsx(b,{className:"w-full h-24"}),e.jsx(b,{className:"w-full h-24"})]}):l?s?e.jsx("div",{className:"space-y-8",children:x.map((m,h)=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:m.title}),e.jsx(ee,{items:m.items,threadId:t.id,isAdmin:r})]},h))}):e.jsx(ee,{items:a,threadId:t.id,isAdmin:r}):e.jsxs("div",{className:"text-center p-8 text-gray-500",children:["Agenda items are hidden. ",r?"Click 'Show items' to view them.":"Contact the admin to show the items."]})]})]})},Bt=()=>{const[t,r]=o.useState(!1),[s,n]=o.useState(`Meeting Agenda - ${F(new Date,"MMMM d")}`),[a,c]=o.useState(""),{mutate:l,isPending:u}=Ue(),i=x=>{x.preventDefault(),l({title:s,description:a},{onSuccess:()=>r(!1)})};return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"No Active Agenda Thread"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"There's no active agenda thread for this week. Create one to get started!"})]}),e.jsxs(ne,{open:t,onOpenChange:r,children:[e.jsx(ae,{asChild:!0,children:e.jsx(y,{size:"lg",children:"Create New Agenda Thread"})}),e.jsxs(ie,{className:"sm:max-w-[425px]",children:[e.jsxs(oe,{children:[e.jsx(le,{children:"Create New Agenda Thread"}),e.jsx(ce,{children:"Set up a new thread for collecting agenda items."})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"title",children:"Title"}),e.jsx(de,{id:"title",value:s,onChange:x=>n(x.target.value),placeholder:"Weekly Team Meeting",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"description",children:"Description (optional)"}),e.jsx(I,{id:"description",value:a,onChange:x=>c(x.target.value),placeholder:"Add details about this meeting's goals or context",rows:3})]}),e.jsx(ue,{children:e.jsx(y,{type:"submit",disabled:u||!s.trim(),children:u?"Creating...":"Create Thread"})})]})]})]})]})},Ut=({thread:t})=>{const[r,s]=o.useState(!1),[n,a]=o.useState(t.title),[c,l]=o.useState(t.description||""),[u,i]=o.useState(t.showSubmissions),{mutate:x,isPending:d}=qe(),p=m=>{m.preventDefault(),x({threadId:t.id,updates:{title:n,description:c,showSubmissions:u}},{onSuccess:()=>s(!1)})};return e.jsxs(ne,{open:r,onOpenChange:s,children:[e.jsx(ae,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",children:"Edit"})}),e.jsxs(ie,{className:"sm:max-w-[425px]",children:[e.jsxs(oe,{children:[e.jsx(le,{children:"Edit Agenda Thread"}),e.jsx(ce,{children:"Modify the settings for this agenda thread."})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"edit-title",children:"Title"}),e.jsx(de,{id:"edit-title",value:n,onChange:m=>a(m.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"edit-description",children:"Description"}),e.jsx(I,{id:"edit-description",value:c,onChange:m=>l(m.target.value),rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"show-submissions",checked:u,onCheckedChange:i}),e.jsx(C,{htmlFor:"show-submissions",children:"Show submissions to all participants"})]}),e.jsx(ue,{children:e.jsx(y,{type:"submit",disabled:d||!n.trim(),children:d?"Saving...":"Save Changes"})})]})]})]})},Vt=()=>e.jsx("div",{className:"container max-w-4xl mx-auto py-6",children:e.jsxs(G,{className:"w-full",children:[e.jsxs(W,{children:[e.jsx(b,{className:"h-8 w-2/3"}),e.jsx(b,{className:"h-4 w-1/3 mt-2"})]}),e.jsxs($,{className:"space-y-6",children:[e.jsx(b,{className:"h-32 w-full"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"h-24 w-full"}),e.jsx(b,{className:"h-24 w-full"}),e.jsx(b,{className:"h-24 w-full"})]})]})]})});function Yt(){const{user:t}=Ye();return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Ke,{}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"container py-6",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"This Week's Agenda"}),e.jsx("p",{className:"text-muted-foreground",children:"Submit topics, questions, and discussion points for your team's next meeting."})]}),e.jsxs(y,{className:"flex items-center gap-2",variant:"outline",children:[e.jsx(it,{className:"h-4 w-4"}),e.jsx("span",{children:"View Past Threads"})]})]}),e.jsx(Ht,{})]}):e.jsxs("div",{className:"mx-auto max-w-3xl text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Kep: Better Meeting Agendas"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:"A collaborative platform for distributed teams to create meeting agendas together. Log in with your Nostr identity to get started."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(y,{size:"lg",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),e.jsx("span",{children:"Log in to participate"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[e.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Submit anonymously"}),e.jsx("p",{className:"text-muted-foreground",children:"Share your ideas and concerns without revealing your identity."})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Collaborative focus"}),e.jsx("p",{className:"text-muted-foreground",children:"Everyone can contribute to create more inclusive and relevant agendas."})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Accessible everywhere"}),e.jsx("p",{className:"text-muted-foreground",children:"Works across time zones with multiple accessibility features."})]})]})]})})}),e.jsx("footer",{className:"border-t py-6 bg-muted/40",children:e.jsxs("div",{className:"container text-center text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Kep"})," - Built on Nostr - ",new Date().getFullYear()]}),e.jsx("p",{className:"mt-1",children:"A privacy-first collaborative agenda builder for distributed teams"})]})})]})}export{Yt as default};
